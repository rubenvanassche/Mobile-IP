<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Click: RateEWMAX&lt; P &gt; Class Template Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Click
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="class_rate_e_w_m_a_x-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">RateEWMAX&lt; P &gt; Class Template Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>An exponentially weighted moving average used to measure a rate.  
 <a href="class_rate_e_w_m_a_x.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="ewma_8hh_source.html">click/ewma.hh</a>&gt;</code></p>

<p>Inherits P.</p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:a664875c4d103844eaf2d41b9846ef656"><td class="memItemLeft" align="right" valign="top"><a id="a664875c4d103844eaf2d41b9846ef656"></a>
typedef P::value_type&#160;</td><td class="memItemRight" valign="bottom"><b>value_type</b></td></tr>
<tr class="separator:a664875c4d103844eaf2d41b9846ef656"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acfd9ac5e40072cb6de7dbd20ce95f301"><td class="memItemLeft" align="right" valign="top"><a id="acfd9ac5e40072cb6de7dbd20ce95f301"></a>
typedef P::signed_value_type&#160;</td><td class="memItemRight" valign="bottom"><b>signed_value_type</b></td></tr>
<tr class="separator:acfd9ac5e40072cb6de7dbd20ce95f301"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a0fad24b9a2cd8d50ece899c8eddc19fa"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_rate_e_w_m_a_x.html#a0fad24b9a2cd8d50ece899c8eddc19fa">RateEWMAX</a> ()</td></tr>
<tr class="memdesc:a0fad24b9a2cd8d50ece899c8eddc19fa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a rate EWMA with initial value(s) 0.  <a href="#a0fad24b9a2cd8d50ece899c8eddc19fa">More...</a><br /></td></tr>
<tr class="separator:a0fad24b9a2cd8d50ece899c8eddc19fa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abf2af9eb212c6c34572596df21b79442"><td class="memItemLeft" align="right" valign="top">signed_value_type&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_rate_e_w_m_a_x.html#abf2af9eb212c6c34572596df21b79442">scaled_average</a> (unsigned ratenum=0) const</td></tr>
<tr class="memdesc:abf2af9eb212c6c34572596df21b79442"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the current scaled moving average.  <a href="#abf2af9eb212c6c34572596df21b79442">More...</a><br /></td></tr>
<tr class="separator:abf2af9eb212c6c34572596df21b79442"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac0881ca5dfc2680de55126e4ff8c2266"><td class="memItemLeft" align="right" valign="top">unsigned&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_rate_e_w_m_a_x.html#ac0881ca5dfc2680de55126e4ff8c2266">scale</a> (unsigned ratenum=0) const</td></tr>
<tr class="memdesc:ac0881ca5dfc2680de55126e4ff8c2266"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns one of the average's scaling factors (bits of fraction).  <a href="#ac0881ca5dfc2680de55126e4ff8c2266">More...</a><br /></td></tr>
<tr class="separator:ac0881ca5dfc2680de55126e4ff8c2266"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aae57d878662fac93a6ef05efac6a65bd"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_rate_e_w_m_a_x.html#aae57d878662fac93a6ef05efac6a65bd">rate</a> (unsigned ratenum=0) const</td></tr>
<tr class="memdesc:aae57d878662fac93a6ef05efac6a65bd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the current rate in samples per second.  <a href="#aae57d878662fac93a6ef05efac6a65bd">More...</a><br /></td></tr>
<tr class="separator:aae57d878662fac93a6ef05efac6a65bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abf1b02fece56525ab18861f952f457d3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_rate_e_w_m_a_x.html#abf1b02fece56525ab18861f952f457d3">update</a> (signed_value_type delta, unsigned ratenum=0)</td></tr>
<tr class="memdesc:abf1b02fece56525ab18861f952f457d3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Update the sample count for the current epoch.  <a href="#abf1b02fece56525ab18861f952f457d3">More...</a><br /></td></tr>
<tr class="separator:abf1b02fece56525ab18861f952f457d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac3ae97cc85c09a1637c72f9677634f64"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_string.html">String</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_rate_e_w_m_a_x.html#ac3ae97cc85c09a1637c72f9677634f64">unparse_rate</a> (unsigned ratenum=0) const</td></tr>
<tr class="memdesc:ac3ae97cc85c09a1637c72f9677634f64"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unparse the current average into a <a class="el" href="class_string.html" title="A string of characters. ">String</a>.  <a href="#ac3ae97cc85c09a1637c72f9677634f64">More...</a><br /></td></tr>
<tr class="separator:ac3ae97cc85c09a1637c72f9677634f64"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><h3>template&lt;typename P&gt;<br />
class RateEWMAX&lt; P &gt;</h3>

<p>An exponentially weighted moving average used to measure a rate. </p>
<p>The <a class="el" href="class_rate_e_w_m_a_x.html" title="An exponentially weighted moving average used to measure a rate. ">RateEWMAX</a> template class represents an exponentially weighted moving average that measures a <em>rate</em>: a count of events per unit time. The average starts out with value 0.</p>
<p><a class="el" href="class_rate_e_w_m_a_x.html" title="An exponentially weighted moving average used to measure a rate. ">RateEWMAX</a> adds to <a class="el" href="class_direct_e_w_m_a_x.html" title="An exponentially weighted moving average. ">DirectEWMAX</a> a concept of epochs, which are periods of time. A <a class="el" href="class_rate_e_w_m_a_x.html" title="An exponentially weighted moving average used to measure a rate. ">RateEWMAX</a> object collects samples over the current epoch. When the epoch closes, the collected sample count is used to update the moving average. Thus, the moving average is measured in samples per epoch. The <a class="el" href="class_rate_e_w_m_a_x.html#aae57d878662fac93a6ef05efac6a65bd" title="Return the current rate in samples per second. ">rate()</a> and <a class="el" href="class_rate_e_w_m_a_x.html#ac3ae97cc85c09a1637c72f9677634f64" title="Unparse the current average into a String. ">unparse_rate()</a> member functions return the rate in samples per <em>second</em>, rather than per epoch. These functions use the epoch frequency to translate between epochs and seconds.</p>
<p>Note that it often makes sense to call <a class="el" href="class_rate_e_w_m_a_x.html#abf1b02fece56525ab18861f952f457d3" title="Update the sample count for the current epoch. ">update()</a> before calling <a class="el" href="class_rate_e_w_m_a_x.html#abf2af9eb212c6c34572596df21b79442" title="Return the current scaled moving average. ">scaled_average()</a>, <a class="el" href="class_rate_e_w_m_a_x.html#aae57d878662fac93a6ef05efac6a65bd" title="Return the current rate in samples per second. ">rate()</a>, or <a class="el" href="class_rate_e_w_m_a_x.html#ac3ae97cc85c09a1637c72f9677634f64" title="Unparse the current average into a String. ">unparse_rate()</a>, in case an epoch or two has passed and the average should take account of passing time.</p>
<p>The template parameter P defines the EWMA parameters required by <a class="el" href="class_direct_e_w_m_a_x.html" title="An exponentially weighted moving average. ">DirectEWMAX</a>, and three others: a rate count, an epoch measurement, and an epoch frequency.</p>
<p>The rate count is the number of rates measured per object. Usually it is 1.</p>
<p>The epoch measurement is a function that returns the current epoch as an unsigned number. Epochs should increase monotonically.</p>
<p>The epoch frequency is the number of epochs per second, and is only used by <a class="el" href="class_rate_e_w_m_a_x.html#aae57d878662fac93a6ef05efac6a65bd" title="Return the current rate in samples per second. ">rate()</a> and <a class="el" href="class_rate_e_w_m_a_x.html#ac3ae97cc85c09a1637c72f9677634f64" title="Unparse the current average into a String. ">unparse_rate()</a>.</p>
<p>These are defined by:</p>
<dl>
<dt><b>P::rate_count</b> </dt>
<dd><p class="startdd">The rate count, as a static constant (for example, defined by an enum).</p>
<p class="enddd"></p>
</dd>
<dt><b>unsigned P::epoch()</b> </dt>
<dd><p class="startdd">This function returns the current epoch number.</p>
<p class="enddd"></p>
</dd>
<dt><b>unsigned P::epoch_frequency()</b> </dt>
<dd>This function returns the number of epochs per second. </dd>
</dl>
<p>Since <a class="el" href="class_rate_e_w_m_a_x.html" title="An exponentially weighted moving average used to measure a rate. ">RateEWMAX</a> inherits from an object of type P, these members are also directly available to callers.</p>
<p>The <a class="el" href="class_rate_e_w_m_a_x_parameters.html" title="Parameters for a RateEWMA with constant scaling factor and alpha, one rate count, and epochs of jiffi...">RateEWMAXParameters</a> type is a good template argument for <a class="el" href="class_rate_e_w_m_a_x.html" title="An exponentially weighted moving average used to measure a rate. ">RateEWMAX</a>.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="class_direct_e_w_m_a_x.html" title="An exponentially weighted moving average. ">DirectEWMAX</a> </dd></dl>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a0fad24b9a2cd8d50ece899c8eddc19fa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0fad24b9a2cd8d50ece899c8eddc19fa">&#9670;&nbsp;</a></span>RateEWMAX()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename P &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_rate_e_w_m_a_x.html">RateEWMAX</a>&lt; P &gt;::<a class="el" href="class_rate_e_w_m_a_x.html">RateEWMAX</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Create a rate EWMA with initial value(s) 0. </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="abf2af9eb212c6c34572596df21b79442"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abf2af9eb212c6c34572596df21b79442">&#9670;&nbsp;</a></span>scaled_average()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename P &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">signed_value_type <a class="el" href="class_rate_e_w_m_a_x.html">RateEWMAX</a>&lt; P &gt;::scaled_average </td>
          <td>(</td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>ratenum</em> = <code>0</code></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Return the current scaled moving average. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ratenum</td><td>rate index (0 &lt;= ratenum &lt; rate_count) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>The returned value has <a class="el" href="class_rate_e_w_m_a_x.html#ac0881ca5dfc2680de55126e4ff8c2266" title="Returns one of the average&#39;s scaling factors (bits of fraction). ">scale()</a> bits of fraction. </dd>
<dd>
<a class="el" href="class_rate_e_w_m_a_x.html#abf2af9eb212c6c34572596df21b79442" title="Return the current scaled moving average. ">scaled_average()</a> does not check the current epoch. If an epoch might have passed since the last <a class="el" href="class_rate_e_w_m_a_x.html#abf1b02fece56525ab18861f952f457d3" title="Update the sample count for the current epoch. ">update()</a>, you should call update(0, <em>ratenum</em>) before calling this function. </dd></dl>

</div>
</div>
<a id="ac0881ca5dfc2680de55126e4ff8c2266"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac0881ca5dfc2680de55126e4ff8c2266">&#9670;&nbsp;</a></span>scale()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename P &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unsigned <a class="el" href="class_rate_e_w_m_a_x.html">RateEWMAX</a>&lt; P &gt;::scale </td>
          <td>(</td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>ratenum</em> = <code>0</code></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns one of the average's scaling factors (bits of fraction). </p>

</div>
</div>
<a id="aae57d878662fac93a6ef05efac6a65bd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aae57d878662fac93a6ef05efac6a65bd">&#9670;&nbsp;</a></span>rate()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename P &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="class_rate_e_w_m_a_x.html">RateEWMAX</a>&lt; P &gt;::rate </td>
          <td>(</td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>ratenum</em> = <code>0</code></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Return the current rate in samples per second. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ratenum</td><td>rate index (0 &lt;= ratenum &lt; rate_count) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>The returned value is unscaled. </dd>
<dd>
<a class="el" href="class_rate_e_w_m_a_x.html#aae57d878662fac93a6ef05efac6a65bd" title="Return the current rate in samples per second. ">rate()</a> does not check the current epoch. If an epoch might have passed since the last <a class="el" href="class_rate_e_w_m_a_x.html#abf1b02fece56525ab18861f952f457d3" title="Update the sample count for the current epoch. ">update()</a>, you should call update(0, <em>ratenum</em>) before calling this function. </dd></dl>

</div>
</div>
<a id="abf1b02fece56525ab18861f952f457d3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abf1b02fece56525ab18861f952f457d3">&#9670;&nbsp;</a></span>update()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename P &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_rate_e_w_m_a_x.html">RateEWMAX</a>&lt; P &gt;::update </td>
          <td>(</td>
          <td class="paramtype">signed_value_type&#160;</td>
          <td class="paramname"><em>delta</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>ratenum</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Update the sample count for the current epoch. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">delta</td><td>increment for current epoch sample count </td></tr>
    <tr><td class="paramname">ratenum</td><td>rate index (0 &lt;= ratenum &lt; rate_count) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>If the epoch has changed since the last <a class="el" href="class_rate_e_w_m_a_x.html#abf1b02fece56525ab18861f952f457d3" title="Update the sample count for the current epoch. ">update()</a>, this function applies the last epoch's sample count (if any) to the relevant moving average, accounts for any passage of time (in case one or more epochs have passed with no samples), and clears the sample count for the new epoch. </dd></dl>

</div>
</div>
<a id="ac3ae97cc85c09a1637c72f9677634f64"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac3ae97cc85c09a1637c72f9677634f64">&#9670;&nbsp;</a></span>unparse_rate()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename P &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_string.html">String</a> <a class="el" href="class_rate_e_w_m_a_x.html">RateEWMAX</a>&lt; P &gt;::unparse_rate </td>
          <td>(</td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>ratenum</em> = <code>0</code></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Unparse the current average into a <a class="el" href="class_string.html" title="A string of characters. ">String</a>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ratenum</td><td>rate index (0 &lt;= ratenum &lt; rate_count) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>The returned value is unscaled, but may contain a fractional part. </dd>
<dd>
<a class="el" href="class_rate_e_w_m_a_x.html#ac3ae97cc85c09a1637c72f9677634f64" title="Unparse the current average into a String. ">unparse_rate()</a> does not check the current epoch. If an epoch might have passed since the last <a class="el" href="class_rate_e_w_m_a_x.html#abf1b02fece56525ab18861f952f457d3" title="Update the sample count for the current epoch. ">update()</a>, you should call update(0, <em>ratenum</em>) before calling this function. </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>include/click/<a class="el" href="ewma_8hh_source.html">ewma.hh</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Nov 13 2017 20:11:40 for Click by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
